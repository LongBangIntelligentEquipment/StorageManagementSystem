<%- include('zHeader') %>
<script language="javascript">
</script>

<body id="bodyPage">
<div id="blankCover" style="position: absolute;background-color: rgba(255,255,255,0.5);width: 100%;height: 100%;z-index: 998" hidden></div>

<section class="functionBoard" >

    <%- include('zMenu') %>

    <div class="functionBoard right">
        <main role="main" class="container mt-3 mb-3">

            <header role="banner">
                <div class="headcontainer">
                    <div id="pageTitle" class="page-title">
                        生产管理
                    </div>
                    <span class="page-title" style="position: absolute;padding-top: 45px;margin-left: 5px;flex:0 1 auto;font-weight: normal; font-size: 0.8rem">欢迎您，</span><span id="role" class="page-title" style="position: absolute;margin-left: 55px; padding-top: 45px;flex:0 1 auto;font-weight: normal; font-size: 0.8rem"><%=user.role%></span><span class="page-title" style="padding-top: 45px;position: absolute;margin-left: 120px;flex:0 1 auto;font-weight: normal; font-size: 0.8rem">&emsp;<%=user.userName%></span>
                </div>
            </header>

            <form method="post" enctype="multipart/form-data" onsubmit="confirmAgainEdit()" action="/adBOMListMachineEdit?machineId=<%=machine[0].machineId%>">
                <table cellpadding="0"cellspacing="0"  class="itemDetailsPage">
                    <tr>
                        <td >
                            <div  style="width: 450px;margin-top: -80px;height: 380px;font-size: 1.16rem   ">
                                <div class="itemDetail">生产设备信息：</div>
                                <div class="itemDetail">名称：<input class="itemDetailsInput" name="MachineName" id="detail0" value="<%=machine[0].machineName%>" disabled ></div>
                                <div class="itemDetail">型号：<input class="itemDetailsInput" name="MachineModel" id="detail1" value="<%=machine[0].machineId%>" disabled  ></div>
                                <div class="itemDetail">负责人：<select class="itemDetailsInput" name="MachineDesigner" id="detail2" disabled required="required"  >
                                        <option value="<%= machine[0].designer %>" selected><%= machine[0].designer %></option>
                                        <% for(let i = 0; i < users.length; i++) { %>
                                            <% if (machine[0].designer === users[i].userName) {
                                                if (i < users.length - 1) {
                                                    i++;
                                                } else {
                                                    break;
                                                }
                                            } %>
                                            <% if (users[i].role === '技术员' || users[i].role === '系统管理员') { %>
                                                <option value="<%= users[i].userName %>"><%= users[i].userName %></option>
                                            <% } %>
                                        <% } %>
                                    </select>
                                </div>
                                <div class="itemDetail">序列号：<%=machine[0].p_machineId%></div>
                                <div class="itemDetail">关联订单：<select  class="itemDetailsInput" name="MachineDesigner" id="detail3" disabled>
                                        <option  value="<%=machine[0].customerOrderId%>"><%=machine[0].customerOrderId%></option>
                                    </select></div>
                                <div class="itemDetail" >更新日期：<input class="itemDetailsInput" name="MachineUpdateTime" value=" <%=machine[0].updateTime.getFullYear()%>-<%=machine[0].updateTime.getMonth()+1%>-<%=machine[0].updateTime.getDate()%>" disabled ></div>
                                <div class="itemDetail" >开始时间：<%=machine[0].productionStart.getFullYear()%>-<%=machine[0].productionStart.getMonth()+1%>-<%=machine[0].productionStart.getDate()%></div>
                                <div class="itemDetail" >结束时间：<%=machine[0].productionFinish.getFullYear()%>-<%=machine[0].productionFinish.getMonth()+1%>-<%=machine[0].productionFinish.getDate()%></div>
                                <div class="itemDetail" id="changeEndDate" hidden>修改结束日期：<input class="itemDetailsInput" id="detail4" type="date" name="addEndDate" value="<%=machine[0].productionFinish.getFullYear()%>-<%=machine[0].productionFinish.getMonth()+1%>-<%=machine[0].productionFinish.getDate()%>"  disabled></div>
                                <div class="itemDetail">状态：<%=machine[0].productionState%></div>
                                <div class="itemDetail" id="machineCostRow" hidden >设备成本：<input class="itemDetailsInput" name="MachineCost" value="<%=machineCost%>元" disabled ></div>
                                <style onload="Authority('系统管理员','#machineCostRow')"></style>
                                <div class="itemDetail">备注：<input class="itemDetailsInput" name="MachineNote" id="detail5" value="<%=machine[0].mNote%>" disabled ></div>
                            </div>
                        </td>
                    </tr>
                </table>
            </form>
        </main>
    </div>
</section>

<%- include('zFooter') %>
</body>
</html>